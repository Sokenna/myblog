### 计算机网络
#### 第一章 概论
- **什么是Internet？**
- **什么是协议？**
- **网络边缘**
- **接入网、物理媒体**
- **网络核心：分组交换、线路交换**
- **Internet/ISP结构**
- **性能：丢包、延时、吞吐量**
- **协议层次、服务模型**
- **历史**

- **网络分类**
    - 网络
    - 计算机网络
      `节点和链路`
    - 互联网

- **Internet:从具体构成角度**
    - 节点
        - 主机及其上运行的应用程序
        - 路由器、交换机等网络交换设备
    - 边：通信链路
        - 接入网链路：主机连接到互联网的链路
        - 主干链路：路由器间的链路
    - 协议

    - **协议控制发送、接收消息**
      - 如TCP、IP、HTTP、FTP、PPP
    - **Internet:"网络的网络"**
        - 松散的层次结构，互联的ISP
        - 公共Internet vs 专用Intranet
    - **Internet标准**
        - RFC:Request for comments
        - IETF:Internet Engineering Task Force

  **网络协议**
    - 类似人类协议
    - 机器之间的协议而非人与人之间的协议
    - Internet中所有的通信行为都受协议制约
    - 协议定义了在两个或多个通信实体之间交换的==报文格式==、==时序==，以及在报文传输和/或接收或其他方面所采取的==动作==
    - 协议包含语法、语义、时序、动作
- **从服务角度**
    - 使用通信设施进行通信的分布式应用
        - Web、Voip、email、分布式游戏、电子商务、社交网络...
    - 通信基础设施为apps提供编程接口（通信服务）
        - 将发送和接收数据的apps与互联网连接起来
        - 为app应用提供服务选择，类似于邮政服务：
            - 无连接不可靠
            - 面向连接的可靠服务
---
- 网络结构
    - 网络边缘
        - 主机
        - 应用程序（客户端和服务器）
    - 网络核心
        - 互连着的路由器、交换机
        - 网络的网络
    - 接入网、物理媒体
        - 有线或者无线通信链路
---    
- 接入网 
  - 数字用户线`DSL,Digital Subscriber Line`
    - D  
  - 电缆
  - 光纤入户 `FTTH,Fiber to the home`
    - 分布体系结构
      - 主动光纤网络`Active Optical Network`
      - 被动光纤网络`Passive Optical Network`
  - 拨号
  - 卫星
- 物理媒体
  - 导引型
    1. 双绞铜线
    2. 同轴电缆
    3. 光纤
  - 非导引型
    1. 陆地无线电信道
    2. 卫星无线电信道
- 网络边缘
    - 端系统`end system`（主机`host`）
        - 运行应用程序
        - 如Web、email
        - 在“网络的边缘”
    - 客户/服务器模式
        - 客户端向服务器请求、接收服务
        - 如Web浏览器/服务器：email客户端/服务器
    - 对等（peer-peer）模式
        - 很少（甚至没有）专门的服务器
        - 如 Gnutella、KaZaA、Emule

    - 采用网络设施的面向连接服务
        - 目标：在端系统之间传输数据
            - 握手：在数据传输前做好准备
                - 人类协议中：你好、你好
                - 两个通信实体之间为连接建立状态
            - TCP-传输控制协议（Transaction Control Protocol）
                - Internet上面向连接的服务
        - TCP服务【RFC 793】
            - 可靠的、按顺序的传送数据
                - 确认和重传
            - 流量控制
                - 发送方不会淹没接收方
            - 拥塞控制
                - 当网络拥塞时，发送方降低发送速率
    - 采用基础设施的无连接服务
        - 目标：在端系统之间传送数据
            - 无连接服务
        - UDP-用户数据报协议（User DataGram Protocol）[RFC 768]
            - 无连接
            - 不可靠数据传输
            - 无流量控制
            - 无拥塞控制
        - 使用UDP的应用：
            - 流媒体、远程会议、DNS、Internet电话

- 网络核心
    - 网络核心：路由器的网状网络
    - 基本问题：数据怎么通过网络进行传输？
        - 电路交换：为每个呼叫预留一条专有电路，如电话网
    1. 分组交换：
       1. 将要传输的数据分成一个个单位（分组）
            - 将分组从一个路由器传到相邻路由（hop），一段段最终从源端传到目标端
            - 每段：采用链路的最大传输能力（带宽）
       2. 存储转发传输
       3. 排队时延和分组丢失（丢包）
       4. 转发表和路由选择协议
    2. 电路交换
       1. todo
---
- 分组交换
  - 节点总时延 `total nodal delay`
    1. 节点处理时延 `nodal processing delay`
    2. 排队时延 `queuing delay`
    3. 传输时延 `transmission delay`
    4. 传播时延 `propagation delay`
    5. 时延带宽积 `时延带宽积 = 传播时延 * 带宽`
  - 瓶颈链路 `bottleneck link`
    1. min{Rc,Rs},Rc表示客户端和路由器之间链路传输速率，Rs表示服务器与路由器之间链路传输速率
    2. 传输一个F比特文件需要的时间 = F/min{Rc,Rs}
  
```
【例】考虑两台主机A和主机B由一条带宽为R bps、长度为M米的链路互连，信号传播速率为V m/s。
假设主机A从t=0时刻开始向主机B发送分组，分组长度为L比特。试求：

1) 传播延迟（时延）dp；
dp = M/V
2) 传输延迟dt；
dt = L/R
3) 若忽略结点处理延迟和排队延迟，则端到端延迟de是多少？
de = dp + dt 
4) 若dp>dt，则t=dt时刻，分组的第一个比特在哪里？
因为dp>dt所以第一个分组传输完成的时候，第一个比特还没有到达B点。所以在dt时刻，第一个比特在距离主机A dt*V米的地方
5) 若V=250000km/s，L=512比特，R=100 Mbps，则使带宽时延积刚好为一个分组长度（即512比特）的链路长度M是多少？
dp = (M/V) * R = 512b
M = 512b/(100*10^6)b/s * 250000km/s
M = 1280m
(注：1k=10^3,1M=10^6)
```

---

#### 协议分层
 - 协议栈 `protocol stack` : 各层的所有协议被称为协议栈
 
 - 应用层
   1. 的 
 - 传输层
 - 网络层
 - 数据链路层
 - 物理层
---
#### Web与Http
 - HTTP协议
   1. 请求报文
     ```
      GET /base/index.html HTPT/1.1 #请求行
      Host: 127.0.0.1 #请求的目标地址
      Connection: close #是否持续的连接
      User-agent: Mozilla/5.0 #指明用户代理，即发送请求的浏览器类型
      Accept-language: fr #表示客户想获得对应语言的版本，如果服务器没有，则返回默认版本
     ``` 
    2. 响应报文
    ```
    HTTP/1.1 200 OK #状态行
    Connection: close 
    Date: Tue, 18 Aug 2015 15:44:04 GMT
    Server: Apache/2.2.3 (CentOS)
    Last-Modified: Tuer 18 Aug 2015 15:11:03 GMT
    Content-Length: 6821
    Content-Type: text/html
    (data data data data data •••)
    ```
 - 邮件与SMTP
 - 

---
#### 传输层
 - 传输层协议为运行在不同主机上的应用**进程**之间提供**逻辑通信** `logic communication`的功能
 - 多路复用
   - 在源主机从不同套接字中收集数据块，并为每个数据
     块封装上首部信息(这将在以后用于分解)从而生成报文段，然后将报文段传递到网络
     层，所有这些工作称为多路复用(nmhiplexing)
 - 多路分解
   - 将传输层报文段进行字段解析准确交付到到对应套接字的工作
---
#### 网络层
 - IP协议(网际协议) ``
   1. IP的服务模型是尽力而为交付服务（best-effort delivery service）
      1. IP尽它"最大努力"在通信的主机之间交付报文端，但它不做任何确保
      2. 不确保报文段的交付，不确保
   2. 不可靠服务 `unreliable service`







